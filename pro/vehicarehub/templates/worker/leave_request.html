{% extends 'basew.html' %}

{% block title %}Leave Request{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h2 class="text-center">Leave Request</h2>
            <form id="leave-request-form" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="start_date">Start Date:</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" required>
                </div>
                <div class="form-group">
                    <label for="end_date">End Date:</label>
                    <input type="date" class="form-control" id="end_date" name="end_date" required>
                </div>
                <div class="form-group">
                    <label for="reason">Reason:</label>
                    <textarea class="form-control" id="reason" name="reason" rows="4" required></textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Submit Request</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Get the date input elements
    const startDateInput = document.getElementById('start_date');
    const endDateInput = document.getElementById('end_date');

    // Get the current date
    const currentDate = new Date().toISOString().split('T')[0];

    // Set the min attribute for the date inputs to disable past dates
    startDateInput.setAttribute('min', currentDate);
    endDateInput.setAttribute('min', currentDate);

// Function to validate the Reason field
function validateReasonField() {
    const reasonValue = reasonInput.value.trim();
    
    if (reasonValue === '') {
        reasonError.textContent = 'Please provide a reason.';
        reasonInput.classList.add('is-invalid');
    } else if (!/^[a-zA-Z\s]*$/.test(reasonValue)) {
        reasonError.textContent = 'Reason should only contain alphabets and spaces.';
        reasonInput.classList.add('is-invalid');
    } else {
        reasonError.textContent = ''; // Clear any previous error message
        reasonInput.classList.remove('is-invalid');
        // You can submit the form here if the reason is valid
    }
}
</script>
{% endblock %}
