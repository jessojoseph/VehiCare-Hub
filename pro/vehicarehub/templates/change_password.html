{% extends "base.html" %}
{% block content %}
<div class="container">
  <form method="post" action="{% url 'change_password' %}">
    {% csrf_token %}
    <div class="mt-5">
      <h3 class="my-4 mt-5">Change Password</h3>
      <hr />
      <!-- New password -->
      <div id="alert" class="alert" style="display: none;"></div>

      <div class="col-md-12">
        <label for="exampleInputPassword2" class="form-label" required
          >New password *</label
        >
        <input
          type="password"
          name="new_password"
          class="form-control"
          id="exampleInputPassword2"
        />
      </div>
      <!-- Confirm password -->
      <div class="col-md-12">
        <label for="exampleInputPassword3" class="form-label" required
          >Confirm Password *</label
        >
        <input
          type="password"
          class="form-control"
          name="confirm_password"
          id="exampleInputPassword3"
        />
      </div>
    </div>
    <div class="d-flex justify-content-center w-100 align-items-center">
      <button class="btn btn-primary profile-button" type="submit">
        Update Password
      </button>
    </div>
  </form>
</div>



<script>
function showAlert(message, isSuccess) {
    const alertElement = document.getElementById('alert');
    alertElement.textContent = message;
    
    if (isSuccess) {
        alertElement.classList.add('alert-success');
        alertElement.classList.remove('alert-danger');
    } else {
        alertElement.classList.add('alert-danger');
        alertElement.classList.remove('alert-success');
    }
    
    alertElement.style.display = 'block';
    
    setTimeout(function() {
        alertElement.style.display = 'none';
    }, 3000);  // Hide the alert after 5 seconds
}

// Call the showAlert function based on the response data
const responseData = JSON.parse('{{ msg|escapejs }}');
if (responseData === 1) {
    showAlert('Password changed successfully.', true);
} else if (responseData === 2) {
    showAlert('Passwords cannot be empty.', false);
} else {
    showAlert('Passwords do not match.', false);
}
</script>
{% endblock %}
